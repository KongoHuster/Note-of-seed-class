
### 一、适配器之间的通信

- 发送端：将分组封装为数据帧，增加差错检测、可靠传输、留空等功能
- 接收端：完成差错检测、实施可靠传输


### 二、直接网络的研究问题

- 编码：对发送到电缆或光纤上的比特进行编码, 使其能被接收主机所理解
- 帧定界：把物理链路上传输的比特序列描述为完整的消息，以便传送到端节点
- 差错检测
- 可靠传输
- 通信：如果链路静态共享, 很容易处理

### 三、网络硬件

#### 1.节点
- 网络中的两种稀缺资源: 节点的内存及网络链路带宽
- 网络适配器是节点接入网络的专用设备

#### 2.网络适配器

- 功能
```
进行串行/并行转换;

对数据进行缓存;

设备驱动程序（数据链路层协议）
```
  

#### 3.链路

- 导向型媒质: 信号在固态媒质上传播, 例如同轴电缆, 光纤, 双绞线
- 非导向型媒质: 信号自由传播, 例如电磁波
- 物理媒介：有线，无线
- 链路容量（通信信道、信道容量）

### 四、编码

#### 1.不归零 NRZ (Non-Return to Zero)

- 问题: 连续的1s 或 0s

连续的 0s可能被误认为没有信号

连续的 1s可能导致基线漂移

时钟恢复困难（同步问题）

#### 2.曼彻斯特编码

- 缺点: 信号跳变速率翻倍，比特率是信号跳变速率（波特率）的一半


### 五、组帧

#### 1.帧定界问题

- 两个节点之间的数据传输以块为单位(帧)
- 能够识别数据帧的开始和结束

### 六、可靠传输

#### 1.停止等待协议

- 链路带宽利用率较低

- 示例 

链路带宽为2 Mbps, RTT为45 ms, 数据帧大小为1.5KB
每一个RTT内, 发送方仅能发送一个数据帧
吞吐量为1500x8/0.045 = 266.7kbps


#### 2.连续ARQ协议

- Go-Back-N
```
一次性发送N个数据帧；

如果第k个帧丢失, 对[k, k+N-1]范围内的所有帧重传。

优点: 接收方不需要缓存接收到的乱序帧，确认简单

缺点: 正确帧也可能被重传，效率较低
```

- 选择性重传

```
一次性发送N个数据帧；

如果第k个帧丢失, 仅重传第k个帧；

接收方对每一个帧进行确认。

优点: 链路利用率较高

缺点: 接收方更复杂
```

#### 3.滑动窗口协议ARQ

- 发送方:发送方在未收到确认前能够发送的数据帧的最大个数

### 七、多路访问控制

#### 1.两种类型的“链路”:

- 点到点链路
- 广播链路(共享的有线/无线传输媒质)

#### 2.共享广播链路通信的基本问题 

- 干扰: 如果两个或多个节点同时传输
- 冲突: 如果节点同时收到两个或多个信号


#### 3.基本解决方法
- 首先、寻址
- 其次，多路访问控制协议

#### 4.MAC协议

- 静态信道划分：
```
在每次循环中每一个节点占用信道固定时长 (时隙, 长度 = 数据帧传输时延) 

将信道划分为较小的 “分片” (时隙, 频率, 编码)

每一个分片被分配给某一节点专用
```
- 随机接入
```
不划分信道, 允许冲突发生;
“避免” 冲突或冲突“恢复”;
更适合于基于分组的数据通信;
案例: Aloha, CSMA, …

```

- 轮转发送
```
节点轮流发送;
待发送数据量大的节点占用信道更长时间;
无冲突;
```

### 八、问题

#### 1.已经懂了的问题

- 1.物理链路和数据链路是什么关系？
```
数据链路可以粗略地理解为数据通道。物理层要为终端设备间的数据通信提供传输媒体及其
连接.媒体是长期的,连接是有生存期的.在连接生存期内,收发两端可以进行不等的一次或多次数
据通信.每次通信都要经过建立通信联络和拆除通信联络两过程.这种建立起来的数据收发关系就
叫作数据链路.而在物理媒体上传输的数据难免受到各种不可靠因素的影响而产生差错,为了弥补
物理层上的不足,为上层提供无差错的数据传输,就要能对数据进行检错和纠错.数据链路的建立,
拆除,对数据的检错,纠错是数据链路层的基本任务.
```

- 2.检错码和纠错码的区别是什么？
```
检错码：只检错不纠正
纠错码：发现错误并给以纠正
检错码：一种编码。指在传输过程中发生错误后，在接收端能自动检查并发现错误的编码。目前常用的检错码有奇偶校验码、恒比码等 检错码的两大类别:奇偶校验编码和循环冗余编码。
纠错码(error correcting code)，在传输过程中发生错误后能在收端自行发现或纠正的码。仅用来发现错误的码一般常称为检错码。为使一种码具有检错或纠错能力，须对原码字增加多余的码元，以扩大码字之间的差别 ，即把原码字按某种规则变成有一定剩余度（见信源编码）的码字，并使每个码字的码之间有一定的关系。关系的建立称为编码。码字到达收端后，可以根据编码规则是否满足以判定有无错误。当不能满足时，按一定规则确定错误所在位置并予以纠正。纠错并恢复原码字的过程称为译码。检错码与其他手段结合使用，可以纠错。
```

- 3. 如何理解CRC的基本工作原理?

```
CRC校验原理看起来比较复杂，好难懂，因为大多数书上基本上是以二进制的多项式形式来说明的。其实很简单的问题，其根本思想就是先在要发送的帧后面附加一个数（这个就是用来校验的校验码，但要注意，这里的数也是二进制序列的，下同），生成一个新帧发送给接收端。当然，这个附加的数不是随意的，它要使所生成的新帧能与发送端和接收端共同选定的某个特定数整除（注意，这里不是直接采用二进制除法，而是采用一种称之为“模2除法”）。到达接收端后，再把接收到的新帧除以（同样采用“模2除法”）这个选定的除数。因为在发送端发送数据帧之前就已通过附加一个数，做了“去余”处理（也就已经能整除了），所以结果应该是没有余数。如果有余数，则表明该帧在传输过程中出现了差错。
```

- 4.如何理解滑动窗口控制机理的工作原理?
```
TCP滑动窗口技术通过动态改变窗口大小来调节两台主机间数据传输。每个TCP/IP主机支持全双工数据传输，因此TCP有两个滑动窗口：一个用于接收数据，另一个用于发送数据。TCP使用肯定确认技术，其确认号指的是下一个所期待的字节。假定发送方设备以每一次三个数据包的方式发送数据，也就是说，窗口大小为3。发送方发送序列号为1、2、3的三个数据包，接收方设备成功接收数据包，用序列号4确认。发送方设备收到确认，继续以窗口大小3发送数据。当接收方设备要求降低或者增大网络流量时，可以对窗口大小进行减小或者增加，本例降低窗口大小为2，每一次发送两个数据包。当接收方设备要求窗口大小为0，表明接收方已经接收了全部数据，或者接收方应用程序没有时间读取数据，要求暂停发送。发送方接收到携带窗口号为0的确认，停止这一方向的数据传输。
```

#### 2.未理解的问题

- 1.Go-back-N和选择重传有什么相同之处，他们的最大区别在哪？
- 2.我们该如何提高停止-等待协议的效率？
- 3.NS-3我们在实验时时如何模拟现实世界多用户，多并发量的场景的？